# 数据类型

## 单维数据类型

单维数据类型包括**数值型、字符型**和**逻辑型**三种。

### Numeric(数字型)

#### 一般理论

分为整型和浮点型，分别代表着整数和小数。

因此有一个重要的问题：

> 赋值语句是没有是否为整型的，那假如编程者赋值了一个**人类视角下的整数**，程序又将如何处理呢？
>
> R语言采用的是**尽量避免脚本报错**的思路，往兼容性更高的类型上发展。

因此如果没有刻意说明，数据刚赋值时**默认为浮点型**!

![R语言对numeric的默认处理](ch01/numeric-default.png)

整型需要人们手动去指定，使用一些方法去说明，好在R语言已经提供了相关的接口可供调用。

~~~R
# 整型integer
a_integer <- as.integer(1) # 这个没有省略方法(?)
is.integer(a_integer) # integer类型判定
# TRUE
~~~

此时R语言引擎就承认这是一个整型变量了。![告诉R语言整型的方法](ch01/numeric-integer.png)

万一遇到了其他的数据类型，R语言也为浮点型double提供了判别方法

~~~R
# double类型
a_double <- 0.1 # 一般默认是这样的
a_double <- as.double(0.1) # 不放心可以这样
is.double(a_double) # double类型判定
# TRUE
~~~

---

#### 特殊处理措施

1. 当R语言在读取**表格中一行/列的值**时，如果全是**人类视角下的整数**，R语言会自动将这一行/列的值**全部视为整型**。

### Character(字符串型)

#### 一般理论

类型即为字符串，一般会使用**引号**作为标志，**不区分单、双引号**。

~~~R
# 字符串型character
a_character <- "Hello, world!"
a_num_character <- "1" # 只要加了引号,那就是字符串型
is.character(a_character)
# TRUE
is.numeric(a_num_character)
# FALSE
is.character(a_num_character)
# TRUE
~~~

一般的字符串就这样了，但是以示例代码中的a_num_character为例，它在人类的视角下可以被视为一个**加了引号的数字型**，那我们可以实现相关的方法，使得这样的值可以进行**跨大类型转换**。

~~~R
# character -> numeric
a_num_character <- "1"
a_num_numeric <- as.numeric(a_num_character) # 如果成功，那a_num_numeric中可以看到对应的字符串
is.numeric(a_num_numeric)
# TRUE
# 万一转换失败了呢?
a_character <- "Hello, world!"
a_numeric_failed <- as.numeric(a_character) # 没活硬整
is.numeric(a_numeric_failed)
# TRUE
~~~

然而这个结果出乎意料，虽然中途没活硬整出现了报错，但此时对numeric的检验函数依旧显示结果为TRUE!这种不合逻辑的行为可就让人头疼了。

那这个时候a_numeric_failed是什么类型呢？答案是NA_real_。

![奇怪的数据类型](ch01/character-numeric-failed.png)

